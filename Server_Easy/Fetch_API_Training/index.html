<!doctype html>
<html class="no-js" lang="pl">
    <head>
        <meta charset="utf-8">
        <title></title>
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Fetch API test</title>
    </head>
        <p>Wynik sprawdź w konsoli</p>
        <h1>Ćwiczenie 1</h1>
        <input type="email" id="emailBtn">
        <input type="submit" id="submitBtn">
        <script>
            // Ćwiczenie 1
            const emailBtn = document.getElementById("emailBtn");
            const submitBtn = document.getElementById("submitBtn");
            submitBtn.addEventListener('click', function (e) {
                    e.preventDefault();

                    const formData = new FormData();
                        formData.append('code', '23');
                        formData.append('status', 'INVALID');
                        formData.append('message', 'No MX Records Found');

                        fetch('https://api.mailtest.in/v1', {
                            method: 'post',
                            body: formData
                        })
                            .then(res => res.json())
                            .then(res => {
                                console.log(res);
                            })
                });
        </script>
        <script>
        // Połączenie z serwerem w celu pobrania użytkowników
            // fetch('https://jsonplaceholder.typicode.com/users')
            //         .then(resp => resp.json())
            //         .then(resp => {
            //             console.log(resp);
            //             resp.forEach(user => {
            //                 console.groupCollapsed(`Użytkownik ${user.id}`)
            //                 console.log(`Nazwa: ${user.name}`);
            //                 console.log(`Nazwa użytkownika: ${user.username}`);
            //                 console.log(`Email: ${user.email}`);
            //                 console.log(`Adres: ${user.address.city} ${user.address.street} ${user.address.zipcode}`);
            //                 console.log(`WWW: ${user.website}`);
            //                 console.groupEnd();
            //             })
            //         })
                    // Wysyłanie danych typu JSON
                    // Sposób 1: Ręczne dodanie użytkownika
                    // fetch('https://jsonplaceholder.typicode.com/users', {
                    //         method: 'post',
                    //         body: 'name=Marcin&surname=Nowak'
                    //     })
                    //         .then(res => res.json())
                    //         .then(res => {
                    //             console.log('Dodałem użytkownika:');
                    //             console.log(res);
                    //         })

                    // Sposób 2: Dodanie użytkownika za pomocą formData
                    // Jeżeli wysyłamy dane do serwera, wysyłane są one za pomocą metody send() jako FormData, które podajemy jako parametr.
                    // const formData = new FormData();
                    //     formData.append('title', 'Lorem ipsum');
                    //     formData.append('body', 'Żoden');
                    //     formData.append('userId', 1);

                    //     fetch('https://jsonplaceholder.typicode.com/posts', {
                    //         method: 'post',
                    //         body: formData
                    //     })
                    //         .then(res => res.json())
                    //         .then(res => {
                    //             console.log('Dodałem użytkownika:');
                    //             console.log(res);
                    //         })

                    // Wysyłanie danych innego typu
                    // Sposób 1: Ręczne ustawienie nagłówka
                    // const ob = {
                    //         title: 'Nazwa posta',
                    //         body: 'Lorem coś tam',
                    //         userId: 1
                    //     };

                    //     fetch('https://jsonplaceholder.typicode.com/posts', {
                    //         method: 'post',
                    //         headers: {
                    //             'Content-Type': 'application/json' //ustawienie odpowiedniego nagłówka Content-Type
                    //         },
                    //         body: JSON.stringify(ob)
                    //     })
                    //         .then(res => res.json())
                    //         .then(res => {
                    //             console.log('Dodałem użytkownika:');
                    //             console.log(res);
                    //         })

                    // Sposób 2: Wykorzystanie obiektu Header
                    // const ob = {
                    //         title: 'Nazwa posta',
                    //         body: 'Lorem coś tam',
                    //         userId: 1
                    //     };

                    // const ourHeaders = new Headers();
                    //     //dodajemy dodatkowe nagłówki
                    //     ourHeaders.append('Content-Type', 'text/plain');
                    //     ourHeaders.append('X-My-Custom-Header', 'CustomValue');

                    //     //czy powyższy obiekt ma dany nagłówek
                    //     ourHeaders.has('Content-Type'); // true

                    //     //pobieramy dany nagłówek
                    //     ourHeaders.get('Content-Type'); // "text/plain"

                    //     //ustawiamy nagłówek
                    //     ourHeaders.set('Content-Type', 'application/json');

                    //     //usuwamy nagłówek
                    //     ourHeaders.delete('X-My-Custom-Header');

                    //     fetch('https://jsonplaceholder.typicode.com/posts', {
                    //         method: 'post',
                    //         headers: ourHeaders,
                    //         body: JSON.stringify(ob)
                    //     })

                    // Błędy połączenia
                    // fetch('https://jsonplaceholder.typicode.com/kaszanka')
                    //         .then(resp => {
                    //             if (resp.ok) {
                    //                 return response.json()
                    //             } else {
                    //                 throw new Error('Wystąpił błąd połączenia!')
                    //             }
                    //         })
                    //         .then(resp => {
                    //             console.log(resp)
                    //         })
                    //         .catch(error => console.dir('Błąd: ', error));


        </script>
    </body>
</html>

