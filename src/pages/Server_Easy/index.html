<!doctype html>
<html class="no-js" lang="pl">
    <head>
        <meta charset="utf-8">
        <title></title>
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <style>
        h1 {font-family:sans-serif; text-transform: uppercase;}
        button {padding:20px; background:#F15C5C; color:#fff; border:0; cursor:pointer;}
        button:disabled {background: #444; cursor:default;}
    </style>
    <body>
        <h1>Ajax test</h1>
        <div>
            <button id="btn">Wczytaj dane z serwera</button>
        </div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script>
            $('#btn').on('click', function() {
                const $btn = $(this);

                $.ajax({
                    url : 'http://localhost:5000/users',
                    dataType : 'json'
                })
                .done(function(ret) {
                    $btn.text('Sprawdź w konsoli debugera');
                    $btn.prop('disabled', true);

                    ret.users.forEach(user => {
                        console.log('%c Użytkownik '+user.name + ':', 'font-weight:bold');
                        console.log(user);
                        console.log('');
                    })
                })
                .fail(function() {
                    console.error('Wystąpił błąd połączenia');
                })
                .always(function() {});

            })
        </script>
        <!-- Pobranie i wyświetlenie danych w konsoli z test.json -->
        <script>
            fetch('http://localhost:3000/users')
                    .then(res => res.json())
                    .then(res => {
                        console.log(res)
                    })
        </script>
    </body>
</html>